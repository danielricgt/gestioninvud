{"ast":null,"code":"var _jsxFileName = \"/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend/gestion_inventarios_frontend-develop/src/pages/Tables/Bienes.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Card, CardBody, Button, Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport { MDBDataTableV5 } from 'mdbreact';\nimport { bienColumns } from './columnsData';\nimport { update_bien } from './../../helpers/fetch';\nimport ModalUpdateBien from './../Modals/modalUpdateBien';\n\nclass BienesTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.changeStateBien = async () => {\n      const {\n        data,\n        idRolTable,\n        bien\n      } = this.state;\n      if (idRolTable === 1) data.fk_estado = 7;\n      data.descripcion = bien.descripcion;\n      data.espacio_fisico = bien.espacio_fisico;\n      data.observaciones = bien.observaciones;\n\n      try {\n        await update_bien(data);\n        alert('Actualización correcta');\n        this.props.update(this.props.idRol);\n      } catch (er) {\n        alert('Error en el servidor');\n      }\n    };\n\n    this.state = {\n      BienesData: props.Bienes,\n      Bienes: [],\n      modalConfirm: false,\n      confirm: false,\n      modal: false,\n      loading: false,\n      descripcion: '',\n      espacio_fisico: '',\n      observaciones: '',\n      idBien: '',\n      idEstado: '',\n      data: null,\n      idRolTable: '',\n      bien: null\n    };\n    this.changeStateBien = this.changeStateBien.bind(this);\n    this.updateBien = this.updateBien.bind(this);\n    this.openModal = this.openModal.bind(this);\n    this.modalConfimation = this.modalConfimation.bind(this);\n    this.callbackModal = this.callbackModal.bind(this);\n    this.toggleModal = this.toggleModal.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      Bienes\n    } = this.props;\n    this.setState({\n      Bienes\n    });\n  }\n\n  async updateBien(dataForm) {\n    try {\n      await update_bien(dataForm);\n      this.props.update(this.props.idRol);\n      alert('Bien actualizado');\n    } catch {\n      alert('Error en el servidor');\n    }\n  }\n\n  openModal(data) {\n    this.setState(prevState => ({\n      modal: !prevState.modal,\n      data\n    }));\n  }\n\n  modalConfimation(data, idRol, bien) {\n    this.setState({\n      data,\n      idRolTable: idRol,\n      bien,\n      modalConfirm: true\n    });\n  }\n\n  callbackModal() {\n    this.setState({\n      modal: false\n    });\n  }\n\n  toggleModal() {\n    this.setState(prevState => ({\n      modalConfirm: !prevState.modal\n    }));\n  }\n\n  render() {\n    const {\n      idRol,\n      Bienes\n    } = this.props;\n    let columns = bienColumns;\n    let rows = [];\n\n    if (idRol === 4) {\n      columns = columns.slice(0, columns.length - 2);\n    }\n\n    Bienes.forEach(data => {\n      if (data.usuario) {\n        rows.push({\n          placa: data.placa ? data.placa : '-',\n          descripcion: data.descripcion ? data.descripcion : '-',\n          sede: data.usuario.dependencia.sede.sede ? data.usuario.dependencia.sede.sede : '-',\n          espacio_fisico: data.espacio_fisico ? data.espacio_fisico : '-',\n          dependencia: data.usuario.dependencia.dependencia ? data.usuario.dependencia.dependencia : '-',\n          observaciones: data.observaciones ? data.observaciones : 'Ninguna',\n          dar_baja: idRol === 4 ? '' : Number(data.estado.id) === 1 ?\n          /*#__PURE__*/\n          React.createElement(\"button\", {\n            className: \"btn btn-danger rounded-pill\",\n            onClick: () => this.modalConfimation({\n              id: Number(data.id),\n              fk_estado: 2\n            }, idRol, data),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }\n          }, \"Dar de baja\") : Number(data.estado.id) === 2 ?\n          /*#__PURE__*/\n          React.createElement(\"button\", {\n            className: \"btn btn-success rounded-pill\",\n            onClick: () => this.modalConfimation({\n              id: Number(data.id),\n              fk_estado: 1\n            }, idRol, data),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 62\n            }\n          }, \"Dar de alta\") :\n          /*#__PURE__*/\n          React.createElement(\"button\", {\n            className: \"btn btn-secondary rounded-pill\",\n            disabled: true,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 35\n            }\n          }, \"Pendiente\"),\n          actualizar: idRol === 4 ? '' :\n          /*#__PURE__*/\n          React.createElement(\"button\", {\n            className: \"btn btn-primary rounded-pill\",\n            onClick: () => this.openModal(data),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 52\n            }\n          }, \"Actualizar\")\n        });\n      }\n    });\n    const data = {\n      columns,\n      rows\n    };\n    return (\n      /*#__PURE__*/\n      React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Container, {\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 33\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(MDBDataTableV5, {\n        responsive: true,\n        bordered: true,\n        searching: false,\n        fullPagination: true,\n        infoLabel: ['', '-', 'de', ''],\n        data: data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 37\n        }\n      }))), this.state.modal ?\n      /*#__PURE__*/\n      React.createElement(ModalUpdateBien, {\n        callback: this.updateBien,\n        modal: this.state.modal,\n        callbackModal: this.callbackModal,\n        data: this.state.data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 33\n        }\n      }) :\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 165\n        }\n      }))),\n      /*#__PURE__*/\n      React.createElement(Modal, {\n        isOpen: this.state.modalConfirm,\n        toggle: this.toggleModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"modal-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h5\", {\n        className: \"modal-title mt-0\",\n        id: \"myModalLabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 29\n        }\n      }, \"Modal Heading\"),\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        type: \"button\",\n        onClick: () => this.setState({\n          modalConfirm: false\n        }),\n        className: \"close\",\n        \"data-dismiss\": \"modal\",\n        \"aria-label\": \"Close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 29\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 33\n        }\n      }, \"\\xD7\"))),\n      /*#__PURE__*/\n      React.createElement(ModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 29\n        }\n      }, \"Overflowing text to show scroll behavior\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 29\n        }\n      }, \"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }\n      }, \"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 29\n        }\n      }, \"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 29\n        }\n      }, \"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 29\n        }\n      }, \"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 29\n        }\n      }, \"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 29\n        }\n      }, \"Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 29\n        }\n      }, \"Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.\"),\n      /*#__PURE__*/\n      React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 29\n        }\n      }, \"Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.\")),\n      /*#__PURE__*/\n      React.createElement(ModalFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Button, {\n        type: \"button\",\n        color: \"secondary\",\n        onClick: () => this.setState({\n          modalConfirm: false\n        }),\n        className: \"waves-effect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 29\n        }\n      }, \"Close\"),\n      /*#__PURE__*/\n      React.createElement(Button, {\n        type: \"button\",\n        color: \"primary\",\n        className: \"waves-effect waves-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 29\n        }\n      }, \"Save changes\")))))\n    );\n  }\n\n}\n\nexport default BienesTable;","map":{"version":3,"sources":["/home/jorg/Downloads/REPOSITORIOS UD/proyecto_frontend/gestion_inventarios_frontend-develop/src/pages/Tables/Bienes.js"],"names":["React","Component","Container","Row","Col","Card","CardBody","Button","Modal","ModalBody","ModalFooter","MDBDataTableV5","bienColumns","update_bien","ModalUpdateBien","BienesTable","constructor","props","changeStateBien","data","idRolTable","bien","state","fk_estado","descripcion","espacio_fisico","observaciones","alert","update","idRol","er","BienesData","Bienes","modalConfirm","confirm","modal","loading","idBien","idEstado","bind","updateBien","openModal","modalConfimation","callbackModal","toggleModal","componentDidMount","setState","dataForm","prevState","render","columns","rows","slice","length","forEach","usuario","push","placa","sede","dependencia","dar_baja","Number","estado","id","actualizar"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Row, Col, Card, CardBody, Button, Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport { MDBDataTableV5 } from 'mdbreact';\nimport { bienColumns } from './columnsData'\nimport { update_bien } from './../../helpers/fetch'\nimport ModalUpdateBien from './../Modals/modalUpdateBien'\n\nclass BienesTable extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            BienesData: props.Bienes,\n            Bienes: [],\n            modalConfirm: false,\n            confirm: false,\n            modal: false,\n            loading: false,\n\n            descripcion: '',\n            espacio_fisico: '',\n            observaciones: '',\n            idBien: '',\n            idEstado: '',\n\n            data: null,\n            idRolTable: '',\n            bien: null,\n        }\n        this.changeStateBien = this.changeStateBien.bind(this)\n        this.updateBien = this.updateBien.bind(this)\n        this.openModal = this.openModal.bind(this)\n        this.modalConfimation = this.modalConfimation.bind(this)\n        this.callbackModal = this.callbackModal.bind(this)\n        this.toggleModal = this.toggleModal.bind(this)\n    }\n\n    componentDidMount() {\n        const { Bienes } = this.props\n        this.setState({\n            Bienes\n        })\n    }\n\n    changeStateBien = async () => {\n        const { data, idRolTable, bien } = this.state;\n        if (idRolTable === 1) data.fk_estado = 7\n        data.descripcion = bien.descripcion\n        data.espacio_fisico = bien.espacio_fisico\n        data.observaciones = bien.observaciones\n\n        try {\n            await update_bien(data)\n            alert('Actualización correcta')\n            this.props.update(this.props.idRol)\n\n        } catch (er) {\n            alert('Error en el servidor')\n        }\n    }\n\n    async updateBien(dataForm) {\n        try {\n            await update_bien(dataForm)\n            this.props.update(this.props.idRol)\n            alert('Bien actualizado')\n        } catch {\n            alert('Error en el servidor')\n        }\n    }\n\n\n    openModal(data) {\n        this.setState(prevState => ({\n            modal: !prevState.modal,\n            data\n        }));\n    }\n\n    modalConfimation(data, idRol, bien) {\n        this.setState({ data, idRolTable: idRol, bien, modalConfirm: true })\n    }\n\n    callbackModal() {\n        this.setState({ modal: false });\n    }\n\n    toggleModal() {\n        this.setState(prevState => ({\n            modalConfirm: !prevState.modal\n        }));\n    }\n\n\n    render() {\n        const { idRol, Bienes } = this.props;\n        let columns = bienColumns\n        let rows = []\n\n        if (idRol === 4) {\n            columns = columns.slice(0, columns.length - 2)\n        }\n\n        Bienes.forEach(data => {\n            if (data.usuario) {\n                rows.push({\n                    placa: data.placa ? data.placa : '-',\n                    descripcion: data.descripcion ? data.descripcion : '-',\n                    sede: data.usuario.dependencia.sede.sede ? data.usuario.dependencia.sede.sede : '-',\n                    espacio_fisico: data.espacio_fisico ? data.espacio_fisico : '-',\n                    dependencia: data.usuario.dependencia.dependencia ? data.usuario.dependencia.dependencia : '-',\n                    observaciones: data.observaciones ? data.observaciones : 'Ninguna',\n                    dar_baja: idRol === 4 ? '' :\n                        Number(data.estado.id) === 1 ?\n                            <button className=\"btn btn-danger rounded-pill\" onClick={() => this.modalConfimation({ id: Number(data.id), fk_estado: 2 }, idRol, data)}>Dar de baja</button>\n                            : Number(data.estado.id) === 2 ? <button className=\"btn btn-success rounded-pill\" onClick={() => this.modalConfimation({ id: Number(data.id), fk_estado: 1 }, idRol, data)}>Dar de alta</button>\n                                : <button className=\"btn btn-secondary rounded-pill\" disabled={true}>Pendiente</button>,\n                    actualizar: idRol === 4 ? '' : <button className=\"btn btn-primary rounded-pill\" onClick={() => this.openModal(data)}>Actualizar</button>\n                })\n            }\n        })\n\n        const data = {\n            columns,\n            rows,\n        }\n\n        return (\n            <React.Fragment>\n                <Container fluid>\n                    <Row>\n                        <Col>\n                            <Card>\n                                <CardBody>\n                                    <MDBDataTableV5\n                                        responsive\n                                        bordered\n                                        searching={false}\n                                        fullPagination={true}\n                                        infoLabel={['', '-', 'de', '']}\n                                        data={data}\n                                    />\n                                </CardBody>\n                            </Card>\n                            {this.state.modal ?\n                                <ModalUpdateBien callback={this.updateBien} modal={this.state.modal} callbackModal={this.callbackModal} data={this.state.data} /> : <p></p>\n                            }\n                        </Col>\n                    </Row>                    \n\n                    <Modal isOpen={this.state.modalConfirm} toggle={this.toggleModal} >\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title mt-0\" id=\"myModalLabel\">Modal Heading</h5>\n                            <button type=\"button\" onClick={() => this.setState({ modalConfirm: false })} className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <ModalBody>\n                            <h5>Overflowing text to show scroll behavior</h5>\n                            <p>Cras mattis consectetur purus sit amet fermentum.\n                            Cras justo odio, dapibus ac facilisis in,\n                            egestas eget quam. Morbi leo risus, porta ac\n                                                            consectetur ac, vestibulum at eros.</p>\n                            <p>Praesent commodo cursus magna, vel scelerisque\n                            nisl consectetur et. Vivamus sagittis lacus vel\n                                                            augue laoreet rutrum faucibus dolor auctor.</p>\n                            <p>Aenean lacinia bibendum nulla sed consectetur.\n                            Praesent commodo cursus magna, vel scelerisque\n                            nisl consectetur et. Donec sed odio dui. Donec\n                            ullamcorper nulla non metus auctor\n                                                            fringilla.</p>\n                            <p>Cras mattis consectetur purus sit amet fermentum.\n                            Cras justo odio, dapibus ac facilisis in,\n                            egestas eget quam. Morbi leo risus, porta ac\n                                                            consectetur ac, vestibulum at eros.</p>\n                            <p>Praesent commodo cursus magna, vel scelerisque\n                            nisl consectetur et. Vivamus sagittis lacus vel\n                                                            augue laoreet rutrum faucibus dolor auctor.</p>\n                            <p>Aenean lacinia bibendum nulla sed consectetur.\n                            Praesent commodo cursus magna, vel scelerisque\n                            nisl consectetur et. Donec sed odio dui. Donec\n                            ullamcorper nulla non metus auctor\n                                                            fringilla.</p>\n                            <p>Cras mattis consectetur purus sit amet fermentum.\n                            Cras justo odio, dapibus ac facilisis in,\n                            egestas eget quam. Morbi leo risus, porta ac\n                                                            consectetur ac, vestibulum at eros.</p>\n                            <p>Praesent commodo cursus magna, vel scelerisque\n                            nisl consectetur et. Vivamus sagittis lacus vel\n                                                            augue laoreet rutrum faucibus dolor auctor.</p>\n                            <p>Aenean lacinia bibendum nulla sed consectetur.\n                            Praesent commodo cursus magna, vel scelerisque\n                            nisl consectetur et. Donec sed odio dui. Donec\n                            ullamcorper nulla non metus auctor\n                                                            fringilla.</p>\n                        </ModalBody>\n                        <ModalFooter>\n                            <Button type=\"button\" color=\"secondary\" onClick={ () => this.setState({ modalConfirm: false})} className=\"waves-effect\">Close</Button>\n                            <Button type=\"button\" color=\"primary\" className=\"waves-effect waves-light\">Save changes</Button>\n                        </ModalFooter>\n                    </Modal>\n                </Container>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default BienesTable;"]},"metadata":{},"sourceType":"module"}